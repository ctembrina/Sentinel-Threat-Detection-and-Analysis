# Sentinel Threat Detection and Analysis




<h2>Description</h2>
This project demonstrates the deployment of a cloud-based Security Operations Center (SOC) using Microsoft Azure Sentinel (SIEM) to detect and analyze intrusion attempts targeting a Windows Virtual Machine (VM). The architecture showcases how real-time telemetry and security logs are collected, analyzed, and visualized through an integrated cloud security pipeline.


<h2>Utilities Used</h2>

- <b>Microsoft Azure Portal – Cloud management and deployment interface</b> 
- <b>Microsoft Sentinel (SIEM) – Security Information and Event Management for detection and analysis</b>
- <b>Azure Log Analytics Workspace – Log collection and data correlation</b>
- <b>Azure Virtual Machine (Windows Server) – Host system for attack simulation</b>
- <b>Azure Network Security Group (NSG) – Network access control and traffic filtering</b>
- <b>Azure Virtual Network (VNet) – Network isolation and communication routing</b>
- <b>Azure Resource Group – Resource organization and lifecycle management</b>
- <b>Draw.io (diagrams.net) – Architecture diagram design and visualization</b>




<h2>Architecture Description:</h2>

<p align="left">
The lab environment is built within the Azure Cloud Platform, where a Resource Group hosts a Virtual Machine (VM) connected to a Virtual Network (VNet) and protected by a Network Security Group (NSG). The VM is intentionally exposed to the public internet to simulate real-world attack scenarios from external threat actors. Security and event data generated by the VM is ingested into the Log Analytics Workspace, where it is then forwarded to Microsoft Sentinel (SIEM) for advanced analysis and correlation. Sentinel workbooks and dashboards visualize detected activities, such as brute-force attempts, suspicious logins, and geographic attack mapping.

<p align="center"> 
  
<br/>
<img src="https://i.imgur.com/K979mXd.png"height="80%" width="80%" alt="Disk Sanitization Steps"/>
<br />
<br />
<h2>Key Components:</h2>

- <b>Azure Resource Group – Centralized container for managing cloud assets</b> 
- <b>Virtual Machine (VM) – Simulated endpoint targeted by attackers</b>
- <b>Network Security Group (NSG) – Defines inbound and outbound traffic rules</b>
- <b>Log Analytics Workspace – Collects and normalizes security logs</b>
- <b>Microsoft Sentinel (SIEM) – Performs detection, analysis, and visualization of attack data</b>
- <b>Attack Map Dashboard – Displays live intrusion attempts based on geolocation data</b>

<h2>Outcomes:</h2>

- <b>Successfully detected and visualized external brute-force and network intrusion attempts</b> 
- <b>Gained hands-on experience configuring Azure Sentinel, Log Analytics, and NSG rules</b>
- <b>Demonstrated understanding of SIEM operations, cloud security architecture, and incident analysis</b>
  
<h2>Lab:</h2>

- <b>Network Security Group (NSG) Exposure Configuration</b>

<p align="left"> 
In this stage of the project, I modified the Azure Network Security Group (NSG) to simulate a high-risk network exposure. I deleted the original RDP (3389) inbound rule and created a new rule named “Danger_AllowAnyCustomInbound”, configured to allow unrestricted inbound traffic from any source and any port.

This intentional misconfiguration was designed to mimic a real-world vulnerability, allowing potential external access to the virtual machine through the public internet. The objective was to test how Microsoft Sentinel and the Log Analytics Workspace detect, log, and visualize these suspicious or unauthorized connections in a Security Operations Center (SOC) environment.

By temporarily creating this rule, I was able to demonstrate how insecure configurations can be quickly identified through alerting and analytics tools within Azure’s security ecosystem.

<p align="center"> 

<img src="https://i.imgur.com/8yF0Bxz.png" height="80%" width="80%" alt="Disk Sanitization Steps"/>
<br />
<br />
<img src="https://i.imgur.com/6y57hAZ.png" height="80%" width="80%" alt="Disk Sanitization Steps"/>
<br />
<br />
<img src="https://i.imgur.com/U2NzW1j.png" height="80%" width="80%" alt="Disk Sanitization Steps"/>
<br />
<br />
<img src="https://i.imgur.com/uPb6IRP.png" height="80%" width="80%" alt="Disk Sanitization Steps"/>
<br />
<br />

- <b>Virtual Machine Configuration</b>

<p align="left"> 
Named the Azure Virtual Machine (CORP-CTNET-EAST-1), a honeypot, intentionally designed to attract cyber attackers. It mimics real targets, such as servers, applications, or networks, but is isolated and monitored to record attacker behavior, techniques, and tools.

The main purpose of a honeypot is to detect, study, and analyze malicious activity without risking real assets. Security teams use honeypots to gain insights into new attack patterns, improve intrusion detection systems, and strengthen overall defensive strategies.

<p align="center"> 
<img src="https://i.imgur.com/nNR0WH8.png" height="80%" width="80%" alt="Disk Sanitization Steps"/>
<br />
<br />
<p align="left"> 
I tested connectivity to the virtual machine by connecting via RDP and then configured the firewall rules within the VM to allow the necessary traffic. (windows defender = off)
<p align="center"> 
<img src="https://i.imgur.com/Fxq2yRu.png" height="80%" width="80%" alt="Disk Sanitization Steps"/>
<br />
<br />
<img src="https://i.imgur.com/5yL189C.png" height="80%" width="80%" alt="Disk Sanitization Steps"/>
<br />
<br />
<p align="left"> 
To verify logging and detection, I attempted a failed login using a bogus username (employee) and then examined Windows Event Viewer. The Event Viewer contained the expected failed authentication entries (timestamps, source IP, and failure reason), confirming that local auditing captured unsuccessful logon attempts for monitoring and incident response validation.
<p align="center"> 
<img src="https://i.imgur.com/fgAMYGU.png" height="80%" width="80%" alt="Disk Sanitization Steps"/>
<br />
<p align="left"> 
I then opened Windows Event Viewer and filtered the Security logs using Event ID 4625 as the search criterion, limiting the results to only failed logon events. This confirmed that unsuccessful login attempts were accurately recorded and traceable for audit and incident response purposes.
 - Source: Security (generated by the Local Security Authority Subsystem Service — LSASS)

Event ID: 4625

Category: Logon/Logoff

Meaning: An account failed to log on

Common reasons:

Wrong username or password

Disabled account

Locked-out account

Logon type not allowed (e.g., RDP disabled for that user)
<p align="center"> 
<img src="https://i.imgur.com/dkJc5xm.png" height="80%" width="80%" alt="Disk Sanitization Steps"/>
<br />
<p align="left"> 
Limiting the results to only failed logon events. This confirmed that unsuccessful login attempts were accurately recorded and traceable for audit and incident response purposes.
<p align="center"> 
<img src="https://i.imgur.com/XYCV2WG.png" height="80%" width="80%" alt="Disk Sanitization Steps"/>
<br />
<br />

- <b>Log Analytics Workspace</b>
<p align="left"> 
Configured an Azure Log Analytics Workspace to centralize and analyze log data from virtual machines, enabling event correlation, security monitoring, and real-time alerting using KQL queries.








<h2>Summary</h2>








